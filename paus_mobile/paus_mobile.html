<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">

<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">

<title>PAUS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- üî• SOFORTIGER UPDATE CHECK -->
<script>
(async function () {

    try {
        const response = await fetch("version.json?cache=" + Date.now());
        const data = await response.json();

        const savedVersion = localStorage.getItem("app_version");

        if (savedVersion !== data.version) {

            localStorage.setItem("app_version", data.version);

            // HARD RELOAD mit Cache-Break
            window.location.href =
                window.location.origin +
                window.location.pathname +
                "?v=" + data.version + "&t=" + Date.now();

        }

    } catch (e) {
        console.log("Version check failed");
    }

})();
</script>

<link rel="stylesheet" href="paus_mobile.css?v=1">
<script defer src="paus_mobile.js?v=1"></script>

</head>

<body>

<div id="deviceInfo" class="device-info"></div>

<div class="page">

    <h1 class="title">PAUS Lieferung</h1>

    <!-- EINGABEN -->
    <input id="kommission" class="input-field" placeholder="Kommissionsnummer" autocomplete="off">
    <input id="lieferdatum" class="input-field" placeholder="TT.MM" autocomplete="off">

    <!-- FARBAUSWAHL -->
    <div class="color-row">
        <button class="color-btn" data-color="red">Rot</button>
        <button class="color-btn" data-color="blue">Blau</button>
        <button class="color-btn" data-color="black">Schwarz</button>
    </div>

    <!-- BUTTON: Auftrag vorgezogen -->
    <button id="btnVorgezogen" class="vorgezogen-btn">Auftrag vorgezogen</button>

    <!-- Tastatur √∂ffnen -->
    <button id="openKeyboardBtn" class="keyboard-open-btn">Tastatur √∂ffnen</button>

    <!-- POPUP TASTATUR -->
    <div id="keyboardPopup" class="keyboard-popup">
        <div class="keyboard-content">
            <h3 id="keyboardTitle">Eingabe</h3>

            <input id="keyboardInput"
                   class="keyboard-input"
                   inputmode="none"
                   autocomplete="off"
                   autocorrect="off"
                   autocapitalize="off"
                   spellcheck="false">

            <div id="keyboardKeys" class="keyboard-keys"></div>

            <div class="keyboard-actions">
                <button id="keyboardDelete" class="key-delete">L√∂schen</button>
                <button id="keyboardOK" class="key-ok">OK</button>
                <button id="keyboardClose" class="key-close">Schlie√üen</button>
            </div>
        </div>
    </div>

    <!-- UNTEN -->
    <div class="bottom-row">
        <button id="backBtn" class="back-btn">‚óÄ Zur√ºck</button>
        <button id="druckenBtn" class="primary-btn">üñ®Ô∏è Drucken</button>
    </div>

    <div id="buildInfo" class="build-info"></div>

</div>

</body>
</html>
